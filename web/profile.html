<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap"
        rel="stylesheet">

    <title>Klassy Cafe - Restaurant HTML Template</title>
    <!--
    
TemplateMo 558 Klassy Cafe

https://templatemo.com/tm-558-klassy-cafe

-->
    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

    <link rel="stylesheet" href="assets/css/templatemo-klassy-cafe.css">

    <link rel="stylesheet" href="assets/css/owl-carousel.css">

    <link rel="stylesheet" href="assets/css/lightbox.css">

</head>

<body>

    <div id="preloader">
        <div class="jumper">
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>

    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo">
                            <img src="assets/images/klassy-logo.png" align="klassy cafe html template">
                        </a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <li class="scroll-to-section"><a href="index.html">Home</a></li>
                            <li class="scroll-to-section"><a href="#about">About</a></li>

                            <!-- 
                            <li class="submenu">
                                <a href="javascript:;">Drop Down</a>
                                <ul>
                                    <li><a href="#">Drop Down Page 1</a></li>
                                    <li><a href="#">Drop Down Page 2</a></li>
                                    <li><a href="#">Drop Down Page 3</a></li>
                                </ul>
                            </li>
                        -->
                            <li class="scroll-to-section"><a href="#menu">Menu</a></li>
                            <li class="scroll-to-section"><a href="#chefs">Chefs</a></li>
                            <li class="submenu active" id="admin-menu">
                                <a href="javascript:void(0);">Admin</a>
                                <ul>
                                    <li><a href="menu.html">Menu</a></li>
                                    <li><a href="orders.html">Orders</a></li>
                                    <li><a href="chefs.html">Chefs</a></li>
                                </ul>
                            </li>
                            <!-- <li class=""><a rel="sponsored" href="https://templatemo.com" target="_blank">External URL</a></li> -->
                            <li class="scroll-to-section"><a href="#reservation">Contact Us</a></li>
                            <li id="login-nav" class="scroll-to-section"><a href="login.html">Login</a></li>
                            <li class="submenu" id="user-nav">
                                <a href="javascript:void(0);" class="fa fa-user"></a>
                                <ul>
                                    <li><a href="orders.html">Orders</a></li>
                                    <li id="logout-btn">
                                        <a href="javascript:;">Logout</a>
                                    </li>
                                </ul>
                            </li>

                        </ul>
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <!-- ***** Main Banner Area Start ***** -->
    <div id="top">
        <div class="form-container container">
            <div class="row h-100">

                <div class="col-lg-6 offset-lg-3 my-auto">
                    <div>
                        <h3>Profile</h3>
                        <form id="profile-form" class="contact-form mt-3">
                            <div class="form-group row">
                                <label for="email" class="col-sm-3 col-form-label">Email</label>
                                <div class="col-sm-9">
                                    <input required type="text" class="form-control" id="email" value="">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="phonenumber" class="col-sm-3 col-form-label">Phone number</label>
                                <div class="col-sm-9">
                                    <input required type="text" class="form-control" id="phonenumber" value="">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="fullname" class="col-sm-3 col-form-label">Fullname</label>
                                <div class="col-sm-9">
                                    <input required type="text" class="form-control" id="fullname" value="">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-4 offset-8">
                                    <button type="submit" class="main-button-icon">Update profile</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="mt-3">
                        <h3>Password</h3>
                        <form id="password-form" class="contact-form mt-3">
                            <div class="form-group row">
                                <label for="oldpw" class="col-sm-3 col-form-label">Old Password</label>
                                <div class="col-sm-9">
                                    <input required type="password" class="form-control" id="oldpw" value="">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="newpw" class="col-sm-3 col-form-label">New password</label>
                                <div class="col-sm-9">
                                    <input required type="password" class="form-control" id="newpw" value="">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="renewpw" class="col-sm-3 col-form-label">Confirm</label>
                                <div class="col-sm-9">
                                    <input required type="password" class="form-control" id="renewpw" value="">
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-4 offset-8">
                                    <button type="submit" class="main-button-icon">Update
                                        password</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ***** Main Banner Area End ***** -->

    <!-- ***** Footer Start ***** -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 col-xs-12">
                    <div class="right-text-content">
                        <ul class="social-icons">
                            <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                            <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="logo">
                        <a href="index.html"><img src="assets/images/white-logo.png" alt=""></a>
                    </div>
                </div>
                <div class="col-lg-4 col-xs-12">
                    <div class="left-text-content">
                        <p>Â© Copyright Klassy Cafe Co.
                            <br>Design: TemplateMo
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel"></h5>
                    <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery -->
    <script src="assets/js/jquery.min.js"></script>
    <!-- Bootstrap -->
    <script src="assets/js/bootstrap.js"></script>
    <!-- Plugins -->
    <script src="assets/js/axios.js"></script>

    <script src="assets/js/js.cookie.js"></script>
    <script src="assets/js/service.js"></script>
    <script src="assets/js/header.js"></script>
    <script src="assets/js/modal.js"></script>


    <script>
        $(function () {

            $("#preloader").animate({
                'opacity': '0'
            }, 600, function () {
                setTimeout(function () {
                    $("#preloader").css("visibility", "hidden").fadeOut();
                }, 300);
            });

            $("#profile-form").submit(async function (evt) {
                evt.preventDefault()
                const email = $("#email").val()
                const fullName = $("#fullname").val()
                const phoneNumber = $("#phonenumber").val()
                await service.post('/auth/update', { email, fullName, phoneNumber })
                $.showModal('Success', 'Your profile has been updated succcessfully!')
            })

            $("#password-form").submit(async function (evt) {
                evt.preventDefault()
                const oldpw = $("#oldpw").val()
                const newpw = $("#newpw").val()
                const renewpw = $("#renewpw").val()
                if (newpw !== renewpw) {
                    $.showModal('Error', 'Password does not matches!')
                    return
                }
                try {
                    await service.post('/auth/changePassword', { oldpw, newpw, renewpw })
                    $.showModal('Error', 'Password has been updated successfully!')
                    this.reset()
                } catch (e) {
                    $.showModal('Error', e.response.data)
                }
            })

            getProfile()

            async function getProfile() {
                const res = await service.get('/auth')
                const { email, fullName, phoneNumber } = res.data || {}
                $("#email").val(email)
                $("#fullname").val(fullName)
                $("#phonenumber").val(phoneNumber)
            }

            function updateModal(title, body) {
                $(".modal-title").text(title)
                $('.modal-body').text(body)
            }

        })
    </script>
</body>

<style>
    .form-container {
        min-height: calc(100vh - 316px);
    }
</style>

</html>